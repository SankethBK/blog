<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>PSQT (Piece-Square Tables) | Sanketh's Blog</title><meta name=keywords content="psqt"><meta name=description content="PSQT (Piece-Square Tables)
1. What is PSQT?
It is a traditional evaluation technique where every piece gets:

a base material value (pawn = 100, queen = 900…)
plus a square bonus/penalty depending on where it stands

Example intuition:

Knights are better in the center → bonus on d4/e4
Pawns advanced are better → bonus on 6th/7th rank
King is safer in corner early → penalty for being central in middlegame

So evaluation includes:"><meta name=author content="Sanketh"><link rel=canonical href=https://sankethbk.github.io/blog/posts/chess_engine/2026-01-25-psqt/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.deee627d8b8d9065acc54b2c9d901e601e142335047d242a93ba7bce86f41f19.css integrity="sha256-3u5ifYuNkGWsxUssnZAeYB4UIzUEfSQqk7p7zob0Hxk=" rel="preload stylesheet" as=style><link rel=icon href=https://sankethbk.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://sankethbk.github.io/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://sankethbk.github.io/blog/favicon-32x32.png><link rel=apple-touch-icon href=https://sankethbk.github.io/blog/apple-touch-icon.png><link rel=mask-icon href=https://sankethbk.github.io/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://sankethbk.github.io/blog/posts/chess_engine/2026-01-25-psqt/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://sankethbk.github.io/blog/posts/chess_engine/2026-01-25-psqt/"><meta property="og:site_name" content="Sanketh's Blog"><meta property="og:title" content="PSQT (Piece-Square Tables)"><meta property="og:description" content="PSQT (Piece-Square Tables) 1. What is PSQT? It is a traditional evaluation technique where every piece gets:
a base material value (pawn = 100, queen = 900…) plus a square bonus/penalty depending on where it stands Example intuition:
Knights are better in the center → bonus on d4/e4 Pawns advanced are better → bonus on 6th/7th rank King is safer in corner early → penalty for being central in middlegame So evaluation includes:"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-01-25T00:00:00+00:00"><meta property="article:modified_time" content="2026-01-25T00:00:00+00:00"><meta property="article:tag" content="Psqt"><meta name=twitter:card content="summary"><meta name=twitter:title content="PSQT (Piece-Square Tables)"><meta name=twitter:description content="PSQT (Piece-Square Tables)
1. What is PSQT?
It is a traditional evaluation technique where every piece gets:

a base material value (pawn = 100, queen = 900…)
plus a square bonus/penalty depending on where it stands

Example intuition:

Knights are better in the center → bonus on d4/e4
Pawns advanced are better → bonus on 6th/7th rank
King is safer in corner early → penalty for being central in middlegame

So evaluation includes:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://sankethbk.github.io/blog/posts/"},{"@type":"ListItem","position":2,"name":"PSQT (Piece-Square Tables)","item":"https://sankethbk.github.io/blog/posts/chess_engine/2026-01-25-psqt/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"PSQT (Piece-Square Tables)","name":"PSQT (Piece-Square Tables)","description":"PSQT (Piece-Square Tables) 1. What is PSQT? It is a traditional evaluation technique where every piece gets:\na base material value (pawn = 100, queen = 900…) plus a square bonus/penalty depending on where it stands Example intuition:\nKnights are better in the center → bonus on d4/e4 Pawns advanced are better → bonus on 6th/7th rank King is safer in corner early → penalty for being central in middlegame So evaluation includes:\n","keywords":["psqt"],"articleBody":"PSQT (Piece-Square Tables) 1. What is PSQT? It is a traditional evaluation technique where every piece gets:\na base material value (pawn = 100, queen = 900…) plus a square bonus/penalty depending on where it stands Example intuition:\nKnights are better in the center → bonus on d4/e4 Pawns advanced are better → bonus on 6th/7th rank King is safer in corner early → penalty for being central in middlegame So evaluation includes:\nScore = Material + Positional(square bonuses) 2. Piece values in Stockfish Stockfish separates piece values into two phases:\nValue PieceValue[PHASE_NB][PIECE_NB] = { { VALUE_ZERO, PawnValueMg, KnightValueMg, BishopValueMg, RookValueMg, QueenValueMg }, { VALUE_ZERO, PawnValueEg, KnightValueEg, BishopValueEg, RookValueEg, QueenValueEg } }; enum Value : int { VALUE_ZERO = 0, VALUE_DRAW = 0, VALUE_KNOWN_WIN = 10000, VALUE_MATE = 32000, VALUE_INFINITE = 32001, VALUE_NONE = 32002, VALUE_MATE_IN_MAX_PLY = VALUE_MATE - 2 * MAX_PLY, VALUE_MATED_IN_MAX_PLY = -VALUE_MATE + 2 * MAX_PLY, PawnValueMg = 188, PawnValueEg = 248, KnightValueMg = 753, KnightValueEg = 832, BishopValueMg = 826, BishopValueEg = 897, RookValueMg = 1285, RookValueEg = 1371, QueenValueMg = 2513, QueenValueEg = 2650, MidgameLimit = 15258, EndgameLimit = 3915 }; Why two values?\nBecause piece importance changes:\nKnights are strong early (MG) Pawns and king activity matter more late (EG) So Stockfish stores:\nPawnValueMg, PawnValueEg KnightValueMg, KnightValueEg etc. 3. Score type: Middlegame + Endgame packed together Stockfish does not store evaluation as a single number.\nInstead it stores a pair:\nScore = (middlegame_score, endgame_score) Macro\n#define S(mg, eg) make_score(mg, eg) So,\nS(-16, 7) means:\n-16 in middlegame +7 in endgame Stockfish later blends MG/EG depending on game phase.\n4. The Bonus table: Positional square bonuses const Score Bonus[][RANK_NB][FILE_NB/2] This stores:\nFor each piece type For each rank For half the board files (A–D) Why only half files?\nChessboard is symmetric:\nA-file mirrors H-file B mirrors G, etc. So Stockfish saves space:\nFile f = min(file, FILE_H - file); Meaning:\nfile A and H use same bonus file B and G same etc. // Bonus[PieceType][Square / 2] contains Piece-Square scores. For each piece // type on a given square a (middlegame, endgame) score pair is assigned. Table // is defined for files A..D and white side: it is symmetric for black side and // second half of the files. const Score Bonus[][RANK_NB][int(FILE_NB) / 2] = { { }, { // Pawn { S( 0, 0), S( 0, 0), S( 0, 0), S( 0, 0) }, { S(-16, 7), S( 1,-4), S( 7, 8), S( 3,-2) }, { S(-23,-4), S( -7,-5), S( 19, 5), S(24, 4) }, { S(-22, 3), S(-14, 3), S( 20,-8), S(35,-3) }, { S(-11, 8), S( 0, 9), S( 3, 7), S(21,-6) }, { S(-11, 8), S(-13,-5), S( -6, 2), S(-2, 4) }, { S( -9, 3), S( 15,-9), S( -8, 1), S(-4,18) } }, { // Knight { S(-143, -97), S(-96,-82), S(-80,-46), S(-73,-14) }, { S( -83, -69), S(-43,-55), S(-21,-17), S(-10, 9) }, { S( -71, -50), S(-22,-39), S( 0, -8), S( 9, 28) }, { S( -25, -41), S( 18,-25), S( 43, 7), S( 47, 38) }, { S( -26, -46), S( 16,-25), S( 38, 2), S( 50, 41) }, { S( -11, -55), S( 37,-38), S( 56, -8), S( 71, 27) }, { S( -62, -64), S(-17,-50), S( 5,-24), S( 14, 13) }, { S(-195,-110), S(-66,-90), S(-42,-50), S(-29,-13) } }, White pawns have 0 score on 1 st rank because they can’t be present there Knights at corners are heavily penallized, while knights at center have the highest scores 5. psq[][]: Final precomputed lookup table Score psq[PIECE_NB][SQUARE_NB]; // init() initializes piece-square tables: the white halves of the tables are // copied from Bonus[] adding the piece value, then the black halves of the // tables are initialized by flipping and changing the sign of the white scores. void init() { for (Piece pc = W_PAWN; pc \u003c= W_KING; ++pc) { PieceValue[MG][~pc] = PieceValue[MG][pc]; PieceValue[EG][~pc] = PieceValue[EG][pc]; Score v = make_score(PieceValue[MG][pc], PieceValue[EG][pc]); for (Square s = SQ_A1; s \u003c= SQ_H8; ++s) { File f = std::min(file_of(s), FILE_H - file_of(s)); psq[ pc][ s] = v + Bonus[pc][rank_of(s)][f]; psq[~pc][~s] = -psq[pc][s]; } } } This is the final table used during evaluation:\nFor every piece (white and black) For every square (64 squares) So later evaluation becomes extremely fast:\nscore += PSQT::psq[piece][square]; No computation needed at runtime.\n~pc means “same piece, opposite color” ~s means “same square, flipped vertically” It works because ~ has a custom overload\ninline Piece operator~(Piece pc) { return Piece(pc ^ 8); // Swap color of piece B_KNIGHT -\u003e W_KNIGHT } inline Square operator~(Square s) { return Square(s ^ SQ_A8); // Vertical flip SQ_A1 -\u003e SQ_A8 } ","wordCount":"769","inLanguage":"en","datePublished":"2026-01-25T00:00:00Z","dateModified":"2026-01-25T00:00:00Z","author":{"@type":"Person","name":"Sanketh"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://sankethbk.github.io/blog/posts/chess_engine/2026-01-25-psqt/"},"publisher":{"@type":"Organization","name":"Sanketh's Blog","logo":{"@type":"ImageObject","url":"https://sankethbk.github.io/blog/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://sankethbk.github.io/blog/ accesskey=h title="Sanketh's Blog (Alt + H)">Sanketh's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">PSQT (Piece-Square Tables)</h1><div class=post-meta><span title='2026-01-25 00:00:00 +0000 UTC'>January 25, 2026</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Sanketh&nbsp;|&nbsp;<a href=https://github.com/SankethBK/blog/edit/main/content/posts/chess_engine/2026-01-25-psqt.md rel="noopener noreferrer edit" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#psqt-piece-square-tables aria-label="PSQT (Piece-Square Tables)">PSQT (Piece-Square Tables)</a><ul><li><a href=#1-what-is-psqt aria-label="1. What is PSQT?">1. What is PSQT?</a></li><li><a href=#2-piece-values-in-stockfish aria-label="2. Piece values in Stockfish">2. Piece values in Stockfish</a></li><li><a href=#3-score-type-middlegame--endgame-packed-together aria-label="3. Score type: Middlegame + Endgame packed together">3. Score type: Middlegame + Endgame packed together</a></li><li><a href=#4-the-bonus-table-positional-square-bonuses aria-label="4. The Bonus table: Positional square bonuses">4. The Bonus table: Positional square bonuses</a></li><li><a href=#5-psq-final-precomputed-lookup-table aria-label="5. psq[][]: Final precomputed lookup table">5. psq[][]: Final precomputed lookup table</a></li></ul></li></ul></div></details></div><div class=post-content><h1 id=psqt-piece-square-tables>PSQT (Piece-Square Tables)<a hidden class=anchor aria-hidden=true href=#psqt-piece-square-tables>#</a></h1><h2 id=1-what-is-psqt>1. What is PSQT?<a hidden class=anchor aria-hidden=true href=#1-what-is-psqt>#</a></h2><p>It is a traditional evaluation technique where every piece gets:</p><ul><li>a base material value (pawn = 100, queen = 900…)</li><li>plus a square bonus/penalty depending on where it stands</li></ul><p>Example intuition:</p><ul><li>Knights are better in the center → bonus on d4/e4</li><li>Pawns advanced are better → bonus on 6th/7th rank</li><li>King is safer in corner early → penalty for being central in middlegame</li></ul><p>So evaluation includes:</p><pre tabindex=0><code>Score = Material + Positional(square bonuses)
</code></pre><h2 id=2-piece-values-in-stockfish>2. Piece values in Stockfish<a hidden class=anchor aria-hidden=true href=#2-piece-values-in-stockfish>#</a></h2><p>Stockfish separates piece values into two phases:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-cpp data-lang=cpp><span style=display:flex><span>Value PieceValue[PHASE_NB][PIECE_NB] <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  { VALUE_ZERO, PawnValueMg, KnightValueMg, BishopValueMg, RookValueMg, QueenValueMg },
</span></span><span style=display:flex><span>  { VALUE_ZERO, PawnValueEg, KnightValueEg, BishopValueEg, RookValueEg, QueenValueEg }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>Value</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>  VALUE_ZERO      <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>  VALUE_DRAW      <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>  VALUE_KNOWN_WIN <span style=color:#f92672>=</span> <span style=color:#ae81ff>10000</span>,
</span></span><span style=display:flex><span>  VALUE_MATE      <span style=color:#f92672>=</span> <span style=color:#ae81ff>32000</span>,
</span></span><span style=display:flex><span>  VALUE_INFINITE  <span style=color:#f92672>=</span> <span style=color:#ae81ff>32001</span>,
</span></span><span style=display:flex><span>  VALUE_NONE      <span style=color:#f92672>=</span> <span style=color:#ae81ff>32002</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  VALUE_MATE_IN_MAX_PLY  <span style=color:#f92672>=</span>  VALUE_MATE <span style=color:#f92672>-</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> MAX_PLY,
</span></span><span style=display:flex><span>  VALUE_MATED_IN_MAX_PLY <span style=color:#f92672>=</span> <span style=color:#f92672>-</span>VALUE_MATE <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> MAX_PLY,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  PawnValueMg   <span style=color:#f92672>=</span> <span style=color:#ae81ff>188</span>,   PawnValueEg   <span style=color:#f92672>=</span> <span style=color:#ae81ff>248</span>,
</span></span><span style=display:flex><span>  KnightValueMg <span style=color:#f92672>=</span> <span style=color:#ae81ff>753</span>,   KnightValueEg <span style=color:#f92672>=</span> <span style=color:#ae81ff>832</span>,
</span></span><span style=display:flex><span>  BishopValueMg <span style=color:#f92672>=</span> <span style=color:#ae81ff>826</span>,   BishopValueEg <span style=color:#f92672>=</span> <span style=color:#ae81ff>897</span>,
</span></span><span style=display:flex><span>  RookValueMg   <span style=color:#f92672>=</span> <span style=color:#ae81ff>1285</span>,  RookValueEg   <span style=color:#f92672>=</span> <span style=color:#ae81ff>1371</span>,
</span></span><span style=display:flex><span>  QueenValueMg  <span style=color:#f92672>=</span> <span style=color:#ae81ff>2513</span>,  QueenValueEg  <span style=color:#f92672>=</span> <span style=color:#ae81ff>2650</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  MidgameLimit  <span style=color:#f92672>=</span> <span style=color:#ae81ff>15258</span>, EndgameLimit  <span style=color:#f92672>=</span> <span style=color:#ae81ff>3915</span>
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p><strong>Why two values?</strong></p><p>Because piece importance changes:</p><ul><li>Knights are strong early (MG)</li><li>Pawns and king activity matter more late (EG)</li></ul><p>So Stockfish stores:</p><ul><li>PawnValueMg, PawnValueEg</li><li>KnightValueMg, KnightValueEg</li><li>etc.</li></ul><h2 id=3-score-type-middlegame--endgame-packed-together>3. Score type: Middlegame + Endgame packed together<a hidden class=anchor aria-hidden=true href=#3-score-type-middlegame--endgame-packed-together>#</a></h2><p>Stockfish does not store evaluation as a single number.</p><p>Instead it stores a pair:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-cpp data-lang=cpp><span style=display:flex><span>Score <span style=color:#f92672>=</span> (middlegame_score, endgame_score)
</span></span></code></pre></div><p>Macro</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#define S(mg, eg) make_score(mg, eg)
</span></span></span></code></pre></div><p>So,</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-cpp data-lang=cpp><span style=display:flex><span>S(<span style=color:#f92672>-</span><span style=color:#ae81ff>16</span>, <span style=color:#ae81ff>7</span>)
</span></span></code></pre></div><p>means:</p><ul><li>-16 in middlegame</li><li>+7 in endgame</li></ul><p>Stockfish later blends MG/EG depending on game phase.</p><h2 id=4-the-bonus-table-positional-square-bonuses>4. The Bonus table: Positional square bonuses<a hidden class=anchor aria-hidden=true href=#4-the-bonus-table-positional-square-bonuses>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>const</span> Score Bonus[][RANK_NB][FILE_NB<span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>]
</span></span></code></pre></div><p>This stores:</p><ul><li>For each piece type</li><li>For each rank</li><li>For half the board files (A–D)</li></ul><p>Why only half files?</p><p>Chessboard is symmetric:</p><ul><li>A-file mirrors H-file</li><li>B mirrors G, etc.</li></ul><p>So Stockfish saves space:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-cpp data-lang=cpp><span style=display:flex><span>File f <span style=color:#f92672>=</span> min(file, FILE_H <span style=color:#f92672>-</span> file);
</span></span></code></pre></div><p>Meaning:</p><ul><li>file A and H use same bonus</li><li>file B and G same</li><li>etc.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>// Bonus[PieceType][Square / 2] contains Piece-Square scores. For each piece
</span></span></span><span style=display:flex><span><span style=color:#75715e>// type on a given square a (middlegame, endgame) score pair is assigned. Table
</span></span></span><span style=display:flex><span><span style=color:#75715e>// is defined for files A..D and white side: it is symmetric for black side and
</span></span></span><span style=display:flex><span><span style=color:#75715e>// second half of the files.
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> Score Bonus[][RANK_NB][<span style=color:#66d9ef>int</span>(FILE_NB) <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  { },
</span></span><span style=display:flex><span>  { <span style=color:#75715e>// Pawn
</span></span></span><span style=display:flex><span>   { S(  <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>), S(  <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>), S(  <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>), S( <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>) },
</span></span><span style=display:flex><span>   { S(<span style=color:#f92672>-</span><span style=color:#ae81ff>16</span>, <span style=color:#ae81ff>7</span>), S(  <span style=color:#ae81ff>1</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>4</span>), S(  <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>8</span>), S( <span style=color:#ae81ff>3</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>) },
</span></span><span style=display:flex><span>   { S(<span style=color:#f92672>-</span><span style=color:#ae81ff>23</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>4</span>), S( <span style=color:#f92672>-</span><span style=color:#ae81ff>7</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>5</span>), S( <span style=color:#ae81ff>19</span>, <span style=color:#ae81ff>5</span>), S(<span style=color:#ae81ff>24</span>, <span style=color:#ae81ff>4</span>) },
</span></span><span style=display:flex><span>   { S(<span style=color:#f92672>-</span><span style=color:#ae81ff>22</span>, <span style=color:#ae81ff>3</span>), S(<span style=color:#f92672>-</span><span style=color:#ae81ff>14</span>, <span style=color:#ae81ff>3</span>), S( <span style=color:#ae81ff>20</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>8</span>), S(<span style=color:#ae81ff>35</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>3</span>) },
</span></span><span style=display:flex><span>   { S(<span style=color:#f92672>-</span><span style=color:#ae81ff>11</span>, <span style=color:#ae81ff>8</span>), S(  <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>9</span>), S(  <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>7</span>), S(<span style=color:#ae81ff>21</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>6</span>) },
</span></span><span style=display:flex><span>   { S(<span style=color:#f92672>-</span><span style=color:#ae81ff>11</span>, <span style=color:#ae81ff>8</span>), S(<span style=color:#f92672>-</span><span style=color:#ae81ff>13</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>5</span>), S( <span style=color:#f92672>-</span><span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>2</span>), S(<span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>) },
</span></span><span style=display:flex><span>   { S( <span style=color:#f92672>-</span><span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>3</span>), S( <span style=color:#ae81ff>15</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>9</span>), S( <span style=color:#f92672>-</span><span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>1</span>), S(<span style=color:#f92672>-</span><span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>18</span>) }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  { <span style=color:#75715e>// Knight
</span></span></span><span style=display:flex><span>   { S(<span style=color:#f92672>-</span><span style=color:#ae81ff>143</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>97</span>), S(<span style=color:#f92672>-</span><span style=color:#ae81ff>96</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>82</span>), S(<span style=color:#f92672>-</span><span style=color:#ae81ff>80</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>46</span>), S(<span style=color:#f92672>-</span><span style=color:#ae81ff>73</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>14</span>) },
</span></span><span style=display:flex><span>   { S( <span style=color:#f92672>-</span><span style=color:#ae81ff>83</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>69</span>), S(<span style=color:#f92672>-</span><span style=color:#ae81ff>43</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>55</span>), S(<span style=color:#f92672>-</span><span style=color:#ae81ff>21</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>17</span>), S(<span style=color:#f92672>-</span><span style=color:#ae81ff>10</span>,  <span style=color:#ae81ff>9</span>) },
</span></span><span style=display:flex><span>   { S( <span style=color:#f92672>-</span><span style=color:#ae81ff>71</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>50</span>), S(<span style=color:#f92672>-</span><span style=color:#ae81ff>22</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>39</span>), S(  <span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>8</span>), S(  <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>28</span>) },
</span></span><span style=display:flex><span>   { S( <span style=color:#f92672>-</span><span style=color:#ae81ff>25</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>41</span>), S( <span style=color:#ae81ff>18</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>25</span>), S( <span style=color:#ae81ff>43</span>,  <span style=color:#ae81ff>7</span>), S( <span style=color:#ae81ff>47</span>, <span style=color:#ae81ff>38</span>) },
</span></span><span style=display:flex><span>   { S( <span style=color:#f92672>-</span><span style=color:#ae81ff>26</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>46</span>), S( <span style=color:#ae81ff>16</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>25</span>), S( <span style=color:#ae81ff>38</span>,  <span style=color:#ae81ff>2</span>), S( <span style=color:#ae81ff>50</span>, <span style=color:#ae81ff>41</span>) },
</span></span><span style=display:flex><span>   { S( <span style=color:#f92672>-</span><span style=color:#ae81ff>11</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>55</span>), S( <span style=color:#ae81ff>37</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>38</span>), S( <span style=color:#ae81ff>56</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>8</span>), S( <span style=color:#ae81ff>71</span>, <span style=color:#ae81ff>27</span>) },
</span></span><span style=display:flex><span>   { S( <span style=color:#f92672>-</span><span style=color:#ae81ff>62</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>64</span>), S(<span style=color:#f92672>-</span><span style=color:#ae81ff>17</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>50</span>), S(  <span style=color:#ae81ff>5</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>24</span>), S( <span style=color:#ae81ff>14</span>, <span style=color:#ae81ff>13</span>) },
</span></span><span style=display:flex><span>   { S(<span style=color:#f92672>-</span><span style=color:#ae81ff>195</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>110</span>), S(<span style=color:#f92672>-</span><span style=color:#ae81ff>66</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>90</span>), S(<span style=color:#f92672>-</span><span style=color:#ae81ff>42</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>50</span>), S(<span style=color:#f92672>-</span><span style=color:#ae81ff>29</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>13</span>) }
</span></span><span style=display:flex><span>  },
</span></span></code></pre></div><ul><li>White pawns have 0 score on 1 st rank because they can&rsquo;t be present there</li><li>Knights at corners are heavily penallized, while knights at center have the highest scores</li></ul><h2 id=5-psq-final-precomputed-lookup-table>5. psq[][]: Final precomputed lookup table<a hidden class=anchor aria-hidden=true href=#5-psq-final-precomputed-lookup-table>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-cpp data-lang=cpp><span style=display:flex><span>Score psq[PIECE_NB][SQUARE_NB];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// init() initializes piece-square tables: the white halves of the tables are
</span></span></span><span style=display:flex><span><span style=color:#75715e>// copied from Bonus[] adding the piece value, then the black halves of the
</span></span></span><span style=display:flex><span><span style=color:#75715e>// tables are initialized by flipping and changing the sign of the white scores.
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>init</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (Piece pc <span style=color:#f92672>=</span> W_PAWN; pc <span style=color:#f92672>&lt;=</span> W_KING; <span style=color:#f92672>++</span>pc)
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>      PieceValue[MG][<span style=color:#f92672>~</span>pc] <span style=color:#f92672>=</span> PieceValue[MG][pc];
</span></span><span style=display:flex><span>      PieceValue[EG][<span style=color:#f92672>~</span>pc] <span style=color:#f92672>=</span> PieceValue[EG][pc];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      Score v <span style=color:#f92672>=</span> make_score(PieceValue[MG][pc], PieceValue[EG][pc]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (Square s <span style=color:#f92672>=</span> SQ_A1; s <span style=color:#f92672>&lt;=</span> SQ_H8; <span style=color:#f92672>++</span>s)
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>          File f <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>min(file_of(s), FILE_H <span style=color:#f92672>-</span> file_of(s));
</span></span><span style=display:flex><span>          psq[ pc][ s] <span style=color:#f92672>=</span> v <span style=color:#f92672>+</span> Bonus[pc][rank_of(s)][f];
</span></span><span style=display:flex><span>          psq[<span style=color:#f92672>~</span>pc][<span style=color:#f92672>~</span>s] <span style=color:#f92672>=</span> <span style=color:#f92672>-</span>psq[pc][s];
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This is the final table used during evaluation:</p><ul><li>For every piece (white and black)</li><li>For every square (64 squares)</li></ul><p>So later evaluation becomes extremely fast:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-cpp data-lang=cpp><span style=display:flex><span>score <span style=color:#f92672>+=</span> PSQT<span style=color:#f92672>::</span>psq[piece][square];
</span></span></code></pre></div><p>No computation needed at runtime.</p><ul><li>~pc means “same piece, opposite color”</li><li>~s means “same square, flipped vertically”</li></ul><p>It works because <code>~</code> has a custom overload</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>inline</span> Piece <span style=color:#66d9ef>operator</span><span style=color:#f92672>~</span>(Piece pc) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>Piece</span>(pc <span style=color:#f92672>^</span> <span style=color:#ae81ff>8</span>); <span style=color:#75715e>// Swap color of piece B_KNIGHT -&gt; W_KNIGHT
</span></span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>inline</span> Square <span style=color:#66d9ef>operator</span><span style=color:#f92672>~</span>(Square s) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>Square</span>(s <span style=color:#f92672>^</span> SQ_A8); <span style=color:#75715e>// Vertical flip SQ_A1 -&gt; SQ_A8
</span></span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://sankethbk.github.io/blog/tags/psqt/>Psqt</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://sankethbk.github.io/blog/>Sanketh's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>